micronaut:
  server:
    port: ${APPLICATION_SERVER_PORT:8088}
  application:
    timeZoneId: EET
    name: webrtc_observer
    authentication:
      hashAlgorithm: ${AUTHENTICATION_HASH_ALGORITHM:`SHA-512`}
      stretching: ${AUTHENTICATION_STRETCHING:2}
      saltSize: ${AUTHENTICATION_SALT_SIZE:32}
  metrics:
    enabled: true
#    export:
#      elastic:
#        enabled: true
#        step: PT1M
---
administration:
  admin:
    username: ${OBSERVER_ADMIN_USERNAME:root}
    secret: ${OBSERVER_ADMIN_PASSWORD:password}
---
observer:
  timeZoneID: EET
  authentication:
    hashAlgorithm: ${AUTHENTICATION_HASH_ALGORITHM:`SHA-512`}
    stretching: ${AUTHENTICATION_STRETCHING:2}
    saltSize: ${AUTHENTICATION_SALT_SIZE:32}
---
kafka:
  consumers:
    webrtc-observer-webExtrAppSamplesEvaluator:
      session:
        timeout:
          ms: 30000
    webrtc-observer-reportDraftsEvaluator:
      session:
        timeout:
          ms: 30000

  bootstrap:
    servers: ${KAFKA_HOSTS:`localhost:9092`}
  streams:
    default:
      num:
        stream:
          threads: 1

---
kafkaTopics:
  #  createIfNotExists: True
  webExtrAppSamples:
    topicName: ${KAFKA_TOPICS_WEBEXTRAPP_SAMPLES:webExtrAppSamples}
    onCreatePartitionNums: 12
    onCreateReplicateFactor: 1

  observertcReports:
    topicName: ${KAFKA_TOPICS_OBSERVERTC_REPORTS:observertcReports}
    onCreatePartitionNums: 6
    onCreateReplicateFactor: 1

  observertcReportDrafts:
    topicName: ${KAFKA_TOPICS_OBSERVERTC_REPORTDRAFTS:observertcReportDrafts}
    onCreatePartitionNums: 4
    onCreateReplicateFactor: 1

---

evaluators:
  callCleaner:
    streamMaxIdleTimeInS: 30
    pcRetentionTimeInDays: 60
    maxAllowedUpdateGapInS: 3600
  activeStreams:
    updatePeriodInS: 10
  sampleTransformer:
    useClientTimestamp: False
    reportOutboundRTPs: True
    reportInboundRTPs: True
    reportRemoteInboundRTPs: True
    reportTracks: True
    reportMediaSources: True
    candidatePairs: True
    reportCandidatePairs: True
    reportLocalCandidates: True
    reportRemoteCandidates: True
    sentReportsCacheSize: 100000
    #    ipFlags:
    #      - name: JVB
    #        networks:
    #          - "192.168.1.0/255.255.255.0"

---
reportsink:
  configFile: ${REPORTSINK_CONFIG_FILE_PATH:`/reportsink.yml`}
  profile: BigQueryProfile
#  profile: DebugProfile
---
hikari:
  username: ${HIKARI_USERNAME:root}
  password: ${HIKARI_PASSWORD:password}
  minIdleInMs: ${HIKARI_MIN_IDLE_IN_MS:100}
  timeout: ${HIKARI_TIMEOUT_IN_MS:1000}
  jdbcURL: ${HIKARI_JDBC:`jdbc:mysql://localhost:3306/ObserveRTC?serverTimezone=EET`}
  jdbcDriver: ${JDBC_DRIVER:`com.mysql.cj.jdbc.Driver`}
  maxPoolSize: ${HIKARI_MAX_POOL_SIZE:100}
  poolname: ${HIKARI_POOL_NAME:gatekeeper}
---
jooq:
  dialect: ${JOOQ_DIALECT:MySQL}
